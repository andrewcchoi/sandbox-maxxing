<!--
---
title: Quickstart Setup Flow (v2)
type: Interactive Workflow
introduced: 4.3.0
refactored: 4.13.0
documents:
  - docs/diagrams/README.md
components:
  profiles: 4
  workflow_phases: 5
  max_questions: 4
last_updated: 2026-02-07
purpose: Interactive setup workflow showing the /quickstart command with profile-based selection and settings file support
---
-->

flowchart TD
    Start([User runs /quickstart]) --> Settings

    subgraph Phase0[Phase 0: Settings Load]
        Settings[Read .claude/sandboxxer.local.md]
        Settings --> HasSettings{Settings file?}
        HasSettings -->|Yes| ApplyDefaults[Apply user defaults]
        HasSettings -->|No| UseBuiltin[Use built-in defaults]
    end

    ApplyDefaults --> Discovery
    UseBuiltin --> Discovery

    subgraph Phase1[Phase 1: Discovery]
        Discovery[Detect project context]
        Discovery --> DetectLang[Scan for language files]
        DetectLang --> DetectPorts[Check port availability]
        DetectPorts --> DetectExisting[Check existing .devcontainer]
    end

    DetectExisting --> SkipQuestions{skip_all_questions?}
    SkipQuestions -->|Yes| Generate
    SkipQuestions -->|No| Q1

    subgraph Phase2[Phase 2: Configuration - Max 4 Questions]
        Q1{Q1: Stack Profile?}
        Q1 -->|Minimal| Minimal[Python 3.12 + Node 20]
        Q1 -->|Backend| Backend[+ Go 1.22, PostgreSQL]
        Q1 -->|Full Stack| FullStack[+ Go, Rust, PostgreSQL]
        Q1 -->|Custom| Custom[Select individual tools]

        Minimal --> Q2
        Backend --> Q2
        FullStack --> Q2
        Custom --> Q2

        Q2{Q2: Firewall?}
        Q2 -->|Disabled| NoFW[Container isolation only]
        Q2 -->|Essentials| Essentials[npm, PyPI, GitHub, Docker]
        Q2 -->|Cloud| Cloud[+ AWS, GCP, Azure]
        Q2 -->|Custom| FWCustom[Custom domains]

        NoFW --> Q3
        Essentials --> Q3
        Cloud --> Q3
        FWCustom --> AddDomains[Enter custom domains]
        AddDomains --> Q3

        Q3{Q3: Workspace Mode?}
        Q3 -->|Bind| Bind[Real-time file sync]
        Q3 -->|Volume| Volume[Docker volume - fast I/O]
        Q3 -->|Auto| Auto[Platform auto-detect]
    end

    Bind --> Generate
    Volume --> Generate
    Auto --> Generate

    subgraph Phase3[Phase 3: Generation]
        Generate[Generate DevContainer files]
        Generate --> CopyTemplates[Copy base templates]
        CopyTemplates --> AppendPartials[Add language partials]
        AppendPartials --> ConfigFirewall[Configure firewall]
        ConfigFirewall --> SetPorts[Set port mappings]
    end

    SetPorts --> Report

    subgraph Phase4[Phase 4: Report]
        Report[Summary Report]
        Report --> Files[Files created:<br/>- Dockerfile<br/>- devcontainer.json<br/>- docker-compose.yml]
        Files --> NextSteps[Next steps:<br/>1. Review configuration<br/>2. Open in VS Code<br/>3. Rebuild container]
    end

    NextSteps --> Done([Ready to open in VS Code])

    style Start fill:#90EE90,stroke:#333,stroke-width:2px
    style Done fill:#90EE90,stroke:#333,stroke-width:2px
    style Q1 fill:#FFE4B5,stroke:#333,stroke-width:2px
    style Q2 fill:#FFE4B5,stroke:#333,stroke-width:2px
    style Q3 fill:#FFE4B5,stroke:#333,stroke-width:2px
    style Generate fill:#87CEEB,stroke:#333,stroke-width:2px
    style Settings fill:#DDA0DD,stroke:#333,stroke-width:2px
    style Report fill:#87CEEB,stroke:#333,stroke-width:2px
